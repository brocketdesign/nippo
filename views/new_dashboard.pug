doctype html
-
    // ** ************* **
    // ** Configuration **
    // ** ************* **
    // 
    // [ Comment out / Provide through model / Let's apply defaults ]
    // 
    // columns = 3;
    // startDate = new Date('07/04/2018'); // 'mm/dd/yyyy'
    // endDate = new Date('5/12/2021'); // 'mm/dd/yyyy'
    // 
    // ------------------------------------------------------------
    // ** ******************************* ** 
    // ** Language-related data (Catalan) ** 
    // ** ******************************* ** 
    const Months = ["January" , "February" , "March" , "April" , "May" , "June" , "July" , "August" , "September" , "October" , "November" , "December"];
    const weekDays = [
        ["日", "Sunday"],    
        ["月", "Monday"],
        ["火", "Tuesday"],
        ["水", "Wednesday"],
        ["木", "Thursday"],
        ["金", "Friday"],
        ["土", "Saturday"],
    ];                                                                         
    // ------------------------------------------------------------
    // ** ********************** **
    // ** Defaults and ckeckings **
    // ** ********************** **
    const today = new Date();
    if (! columns) columns = 4;
    if (! realStartDate) realStartDate = new Date(preiodList[0].start);
    if (! realEndDate) realEndDate = new Date(preiodList[0].end);
html
  head
    title 株式会社堀健
    link(rel="shortcut icon" type="image/ico" href="/image/favicon.ico")
    link(rel='stylesheet', href='/css/style.css')
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous")
    link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css')
    link(rel='stylesheet', href='/css/bootstrap-timepicker.css')
    link(rel='stylesheet', href='/css/nice-select.css')
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css")

    script(src='https://code.jquery.com/jquery-3.6.0.min.js' integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous")
    script(src="https://code.jquery.com/ui/1.10.0/jquery-ui.js")
    script(src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous")
    script(src="https://unpkg.com/feather-icons/dist/feather.min.js")
    script(src='/js/jquery.onscreen.js')
    script(src='/js/jquery.cookie.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.ja.min.js')
    script(src="/js/bootstrap-timepicker.js")
    script(src="/js/jquery.autoKana.js")
    script(src="https://cdn.plot.ly/plotly-2.1.0.min.js")
    script(src='/js/jquery.nice-select.min.js')
    script(src='/js/moment.js')
    //- script(src="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/Sortable.js")
    //- script(src="https://cdn.jsdelivr.net/npm/jquery-sortablejs@latest/jquery-sortable.js")
    script(src='https://cdn.jsdelivr.net/npm/chart.js')
    script(src='/js/script.js')
    script(src='/js/calendar.js')
    
    meta(name="viewport" content="width=device-width, initial-scale=1")
  body
    main#dashboard
      nav.navbar.navbar-expand-lg.navbar-dark.sticky-top.bg-success.p-0.d-flex(style="border-bottom:none;justify-content: start;")
        a.navbar-brand.col-6.col-sm-5.col-md-4.col-lg-3.col-xl-2.mr-0(href='/') 株式会社堀健
        .px-0.d-lg-none.col-1
          button.navbar-toggler(type="button" data-toggle="collapse" data-target="#sidebarSupportedContent" aria-controls="sidebarSupportedContent" aria-expanded="false" aria-label="Toggle sidebar")
            span.navbar-toggler-icon
        ul.navbar-nav.px-3.flex-row.col-5.col-sm-6.col-md-7.col-lg-9.col-xl-10(style="justify-content: end;")
            li.nav-item.text-nowrap.bg-success.px-2
              a.text-white.nav-link.sm-translateY-5px(href=`/dashboard/settings/users/edit/${userID}`) 
                span.ico-sm.mr-1(data-feather='user')
                span.text-white.label-top.d-none.d-sm-inline-block 株式会社掘健
                span#userID.user-top.d-sm-inline-block.d-none(data-value=`${userID}`)
                span#userName.user-top.d-sm-inline-block.d-none(data-value=`${lname} ${fname}`)
                  span#lname #{lname}
                  span  
                  span#fname #{fname}
                  span 様
                  span#user-level.d-none(data-value=`${level}`) 
                  span#start-period.d-none(data-value=`${period_start}`) 
                  span#end-period.d-none(data-value=`${period_end}`) 
            li.nav-item.text-nowrap.px-2.text-right
                a.logout.nav-link.text-white(href='/users/logout') 
                  span.d-sm-inline-block.d-none ログアウト
                  span.ml-1.ico-sm(data-feather="log-out")
      div.d-lg-flex.d-block
        .collapse.navbar-collapse.d-lg-block.col-12.col-lg-3.col-xl-2.sticky-top.bg-success.p-0.pt-4#sidebarSupportedContent
            
            a.new_dashboard-nav-link.mb-1(href="/dashboard/" data-value="nippo")
              span.link-title
                i.fas.fa-tachometer-alt.mr-2 
                | ダッシュボード 
            a.new_dashboard-nav-link.mb-1(href="/dashboard/input_nippo/" data-value="nippo")
              span.link-title
                i.fas.fa-pencil-alt.mr-2 
                | 日報入力画面
            a.new_dashboard-nav-link.mb-1(href="/dashboard/ichiran?type=nippo" data-value="nippo")
              span.link-title
                i.fas.fa-list-alt.mr-2   
                | 業務日報一覧 
            a.new_dashboard-nav-link.mb-1(href="/dashboard/ichiran?type=genbanippo" data-value="nippo")
              span.link-title
                i.fas.fa-tools.mr-2  
                | 現場日報一覧 
            a.new_dashboard-nav-link.mb-1.adminOnly(href="/dashboard/nippoichiranevery" data-value="nippo" style="display:none")
              span.link-title
                i.fas.fa-file-csv.mr-2   
                | CSV作成
            a.new_dashboard-nav-link.mb-1.adminOnly(href="/dashboard/nipposhukei" data-value="nippo" style="display:none")
              span.link-title
                i.fas.fa-calculator.mr-2   
                | 日報集計 
            a.new_dashboard-nav-link.mb-1(href='/dashboard/settings/genba' data-value="nippo" )
              span.link-title
                i.fas.fa-edit.mr-2  
                | 現場情報編集 
            a.new_dashboard-nav-link.mb-1(href=`/dashboard/settings/company` data-value='receip')
              span.link-title
                i.fas.fa-building.mr-2   
                | 業者情報編集 

            
            a.new_dashboard-nav-link.mb-1.adminOnly(style="display:none" href="/dashboard/settings/users" data-value='receip')
              span.link-title
                i.fas.fa-users.mr-2
                | ユーザ管理
            a.new_dashboard-nav-link.mb-1.adminOnly(style="display:none" href="/dashboard/settings/nippo" data-value='receip')
              span.link-title 
                i.fas.fa-clipboard.mr-2
                | 日報設定
            a.new_dashboard-nav-link.mb-1.adminOnly(style="display:none" href="/dashboard/settings/genbastructure" data-value="nippo")
              span.link-title
                i.fas.fa-cogs.mr-2
                | 現場設定
            a.new_dashboard-nav-link.mb-1.adminOnly(style="display:none" href="/dashboard/settings/global" data-value='receip')
              span.link-title
                i.fas.fa-globe.mr-2
                | 基本設定
            a.new_dashboard-nav-link.mb-1.adminOnly(style="display:none" href="/dashboard/settings/holiday" data-value='receip')
              span.link-title
                i.fas.fa-calendar-alt.mr-2
                | カレンダー設定
                
        #preloader.position-fixed.bg-white.col-12.col-lg-9.col-xl(style="top: 0;bottom: 0;left: auto;right: 0;z-index: 999;padding-top:45vh;")
            .d-flex.justify-content-center
              .spinner-border(role="status")
                .sr-only ローディング...
        .col-12.col-lg-9.col-xl-10.container-fluid#mainContainer
          .row
            block content